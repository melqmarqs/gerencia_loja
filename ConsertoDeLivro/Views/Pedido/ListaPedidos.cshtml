@using ConsertoDeLivro.Models;
@model IEnumerable<ConsertoDeLivro.Models.Pedido>
@{
    ViewBag.Title = "Lista de pedidos";
    Usuario usuario = Session["Usuario"] as Usuario;
}

<h2>@ViewBag.Title</h2>

@if (Model != null && Model.Count() > 0) {
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Largura</th>
            <th>Comprimento</th>
            <th>Expessura</th>
            <th>Material</th>
            <th>Aceito</th>
            <th>Feito</th>
            <th>Entregue</th>
            <th>Opções</th>
        </tr>
        @foreach (var item in Model) {
            <tr>
                <td>@Html.DisplayFor(i => item.PedidoID)</td>
                <td>@Html.DisplayFor(i => item.Usuario.Nome) # <span>@item.Usuario.UsuarioID</span></td>
                <td>@Html.DisplayFor(i => item.Largura)</td>
                <td>@Html.DisplayFor(i => item.Comprimento)</td>
                <td>@Html.DisplayFor(i => item.Expessura)</td>
                <td>@Html.DisplayFor(i => item.Material.Nome)</td>
                <td>@Html.DisplayFor(i => item.Aceito)</td>
                <td>@Html.DisplayFor(i => item.Feito)</td>
                <td>@Html.DisplayFor(i => item.Entregue)</td>
                <td>
                    @Html.ActionLink("Detalhes", "DetalhesPedido", "Pedido", new { id = item.PedidoID }, null)
                </td>
            </tr>
        }
    </table>
} else if (usuario != null && usuario.Adm) {
    <h3 class="text-danger">Ainda não foram feitos pedidos.</h3>
} else if (usuario != null && usuario.Dev){
    <h3 class="text-danger">Você ainda não fez nenhum pedido</h3>
    <a href="/Pedido/CriarNovoPedido">Faça seu primeiro pedido</a>
}

